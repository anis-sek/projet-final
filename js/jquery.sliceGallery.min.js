(function(d){d.sliceGallery=function(Sa,e){function Aa(){if(!e.dontAlignPreview){var a=Oa.width(),b=Oa.height(),c=f.width(),d=f.height();a<=c?f.css({left:"0px",marginLeft:"0px"}):f.css({left:"50%",marginLeft:-f.width()/2+"px"});b<=d?f.css({top:"0px",marginTop:"0px"}):f.css({top:"50%",marginTop:-f.height()/2+"px"})}}function oa(){Ba();beforeSlideChange(l);pa();l++;l>n-1&&(l=0);qa();"outside"==k?(M="rightOut",N(1)):B.length?N(2):N(1)}function Ca(){Ba();beforeSlideChange(l);pa();l--;0>l&&(l=n-1);qa();
"outside"==k?(M="leftOut",N(1)):B.length?N(2):N(1)}function Da(a){0>a?a=0:a>n-1&&(a=n-1);a!=l&&(Ba(),beforeSlideChange(l),pa(),M=a>l?"rightOut":"leftOut",l=a,qa(),B.length?N(2):N(1))}function qa(){if("none"!=O){var a=ra[l];a&&("thumbs"==O?a.css({opacity:1,cursor:"default"}):(a.css({cursor:"default"}),a.find("img").attr("src","media/icons/bullet_on.png")))}}function Ba(){if("none"!=O){var a=ra[l];a&&("thumbs"==O?a.css({opacity:Ea,cursor:"pointer"}):(a.css({cursor:"pointer"}),a.find("img").attr("src",
"media/icons/bullet.png")))}}function Ta(){var a,b=1;for(b;b<n;b++)a=d(new Image),Fa[b]=a,url=Ga[b],a.css({display:"block"}).on("load",function(){d(this).css({width:this.width+"px",height:this.height+"px"})}).on("error",function(a){}).attr("src",url)}function Ua(){var a,b=0,c=0;for(b;b<n;b++)a=d(new Image),Pa[b]=a,url=Qa[b],a.css({display:"block",position:"absolute",top:sa+"px",left:sa+"px"}).on("load",function(){Ha=this.width;Ia=this.height;d(this).css({width:Ha+"px",height:Ia+"px"});c++;c==n-1&&
(S=Ha+2*sa,ta=Ia+2*sa,Ra())}).on("error",function(a){}).attr("src",url)}function Ra(){n<=T&&f.find(".nav_controls").remove();if("thumbs"==O){var a,b=0;for(b;b<n;b++)a=d("<div/>"),a.attr("data-id",b),a.css({position:"relative",width:S+"px",height:ta+"px","float":"left",marginRight:b!=n-1?X+"px":"0px",left:"0px",top:"0px",background:Va,cursor:"pointer",opacity:Ea}).append(d(Pa[b])).appendTo(ga),a.bind("mouseover",function(){t&&d(this).css("opacity",1)}),a.bind("mouseout",function(){t&&parseInt(d(this).attr("data-id"),
10)!=l&&d(this).css("opacity",Ea)}),a.bind("click",function(){if(t){var a=parseInt(d(this).attr("data-id"),10);a==l||h||(h=!0,Da(a))}}),ra.push(a)}else{var b=0,c=e.bulletWidth,g=e.bulletHeight;S=c;ta=g;for(b;b<n;b++)a=d("<div/>"),a.attr("data-id",b),a.css({position:"relative","float":"left",marginRight:b!=n-1?X+"px":"0px",left:"0px",top:"0px",width:c+"px",height:g+"px",cursor:"pointer"}).appendTo(ga),ra.push(a),d(new Image).css({display:"block",position:"absolute",width:c+"px",height:g+"px"}).on("load",
function(){}).on("error(",function(a){}).attr("src","media/icons/bullet.png").appendTo(a),a.bind("mouseover",function(){t&&d(this).find("img").attr("src","media/icons/bullet_on.png")}),a.bind("mouseout",function(){t&&parseInt(d(this).attr("data-id"),10)!=l&&d(this).find("img").attr("src","media/icons/bullet.png")}),a.bind("click",function(){if(t){var a=parseInt(d(this).attr("data-id"),10);a==l||h||(h=!0,Da(a))}})}b=n*S+(n-1)*X;a=ta;ga.css({height:a+"px",width:b+"px"});b=n<=T?n:T;b=b*S+(b-1)*X;Wa.css({height:a+
"px",width:b+"px",marginLeft:-b/2+"px"})}function Y(a){var b,c,g=0,D,G=0,e=0,f=0,h,n=Fa[l];if("inside"==k)var m=Math.floor(Math.random()*(Z*aa-1));1==a?(z=d(C[l]),z.css("display","block"),"outside"!=k&&U&&(z.css("zIndex",2),E.css("zIndex",1))):(E=d(C[l]),E.css("display","block"),"outside"!=k&&(U?(E.css("zIndex",2),z.css("zIndex",1)):(E.css("zIndex",1),z.css("zIndex",2))));if(ieBelow9)for(e;e<Z;e++){D=0;for(G;G<aa;G++)c=d("<div/>"),c.attr("data-id",f),"alpha"==k?c.css({position:"absolute",width:p+
"px",height:q+"px",opacity:H,top:G*q+"px",left:e*p+"px",overflow:"hidden"}):"inside"==k?c.css({position:"absolute",width:p+"px",height:q+"px",opacity:H,top:J[m].y+"px",left:J[m].x+"px",overflow:"hidden"}):"outside"==k&&(U?c.css({position:"absolute",width:p+"px",height:q+"px",opacity:H,overflow:"hidden",top:ha+"px",left:"rightOut"==M?-ba+"px":Ja+"px"}):c.css({position:"absolute",width:p+"px",height:q+"px",opacity:H,overflow:"hidden",top:ha+"px",left:-ba+"px"})),b=d("<div/>").appendTo(c).css({position:"absolute",
top:-D+"px",left:-g+"px",filter:"inherit"}),h=n.clone(),b.append(h),1==a?(w.push(c),z.prepend(c)):(B.push(c),E.prepend(c)),D+=q,f++;g+=p;G=0}else for(e;e<Z;e++){D=0;for(G;G<aa;G++)b=document.createElement("canvas"),b.width=p,b.height=q,c=d("<div/>"),c.attr("data-id",f),"alpha"==k?c.css({position:"absolute",width:p+"px",height:q+"px",opacity:H,top:G*q+"px",left:e*p+"px"}):"inside"==k?c.css({position:"absolute",width:p+"px",height:q+"px",opacity:H,top:J[m].y+"px",left:J[m].x+"px"}):"outside"==k&&(U?
c.css({position:"absolute",width:p+"px",height:q+"px",opacity:H,top:ha+"px",left:"rightOut"==M?-ba+"px":Ja+"px"}):c.css({position:"absolute",width:p+"px",height:q+"px",opacity:H,top:ha+"px",left:-ba+"px"})),b.getContext&&(h=b.getContext("2d"),h.drawImage(n[0],g,D,p,q,0,0,p,q),c.append(b),1==a?(w.push(c),z.prepend(c)):(B.push(c),E.prepend(c))),D+=q,f++;g+=p;G=0}}function ca(a,b){var c=0,g,D,e,f=[];if("outside"==k)for("rightOut"==M?ia(a)&&a.reverse():U?ia(a)||a.reverse():ia(a)&&a.reverse(),f="random"==
ua?P(x):P(x,!0),c;c<x;c++)g=d(a[f[c]]),e=parseInt(g.attr("data-id"),10),D=J[e].x,e=J[e].y,g.delay(da*c).animate({left:D+"px",top:e+"px",opacity:1},Q,va);else if("inside"==k)for(f="random"==ua?P(x):P(x,!0),c;c<x;c++)g=d(a[f[c]]),e=parseInt(g.attr("data-id"),10),D=J[e].x,e=J[e].y,g.delay(da*c).animate({left:D+"px",top:e+"px",opacity:1},Q,va);else if("alpha"==k)for(f="random"==ua?P(x):P(x,!0),c;c<x;c++)g=d(a[f[c]]),g.delay(da*c).animate({opacity:1},Q,va);c=Q+x*da;I&&clearTimeout(I);I=setTimeout(function(){I&&
clearTimeout(I);var a=0,c;if("outside"==k)wa(1);else if(U)if(2==b){c=w.length;for(a;a<c;a++)d(w[a]).remove();w=[];z&&z.css("display","none");wa(2)}else{c=B.length;for(a;a<c;a++)d(B[a]).remove();B=[];E&&E.css("display","none");wa(1)}else wa(1);U=!0;sliceGalleryReady()},c)}function xa(a,b){var c=0,g,e=[];if("outside"==k)for("rightOut"==M?ia(a)&&a.reverse():ia(a)||a.reverse(),e="random"==ua?P(x):P(x,!0),c;c<x;c++)g=d(a[e[c]]),parseInt(g.attr("data-id"),10),g.delay(da*c).animate({left:"rightOut"==M?Ja+
"px":-ba+"px",top:ha+"px",opacity:H},Q,va);c=Q+x*da;I&&clearTimeout(I);I=setTimeout(function(){I&&clearTimeout(I);if(1==b){len=w.length;for(A;A<len;A++)d(w[A]).remove();w=[];z&&z.css("display","none");Y(1);ca(w,1)}},c)}function wa(a){afterSlideChange(l);if(1==a)if(0<z.find("div[class=slide_content]").length){ea=z.find("div[class=slide_content]");var b,c,g=0,e=0,f;V=[];c=ea.children().length;for(g;g<c;g++)b={},V.push(b),a=d(ea.children()[g]),b.content_item=a,b.startX=parseInt(a.attr("data-startX"),
10),b.startY=parseInt(a.attr("data-startY"),10),b.endX=parseInt(a.attr("data-endX"),10),b.endY=parseInt(a.attr("data-endY"),10),b.ease=a.attr("data-ease"),b.time=parseInt(a.attr("data-time"),10),b.delay=parseInt(a.attr("data-delay"),10),f=b.time+b.delay,f>e&&(e=f),a.css({position:"absolute",opacity:0,left:b.startX+"px",top:b.startY+"px"});ea.css("display","block");"function"==typeof correctGmap&&correctGmap();g=0;for(g;g<c;g++)b=V[g],a=b.content_item,a.delay(b.delay).animate({left:b.endX+"px",top:b.endY+
"px",opacity:1},{duration:b.time,easing:b.ease});y&&clearTimeout(y);y=setTimeout(ya,Q+e)}else ya();else if(0<E.find("div[class=slide_content]").length){fa=E.find("div[class=slide_content]");e=g=0;W=[];c=fa.children().length;for(g;g<c;g++)b={},W.push(b),a=d(fa.children()[g]),b.content_item=a,b.startX=parseInt(a.attr("data-startX"),10),b.startY=parseInt(a.attr("data-startY"),10),b.endX=parseInt(a.attr("data-endX"),10),b.endY=parseInt(a.attr("data-endY"),10),b.ease=a.attr("data-ease"),b.time=parseInt(a.attr("data-time"),
10),b.delay=parseInt(a.attr("data-delay"),10),f=b.time+b.delay,f>e&&(e=f),a.css({position:"absolute",opacity:0,left:b.startX+"px",top:b.startY+"px"});fa.css("display","block");"function"==typeof correctGmap&&correctGmap();g=0;for(g;g<c;g++)b=W[g],a=b.content_item,a.delay(b.delay).animate({left:b.endX+"px",top:b.endY+"px",opacity:1},{duration:b.time,easing:b.ease});y&&clearTimeout(y);y=setTimeout(ya,Q+e)}else ya()}function N(a){h=!0;v&&v.stop().animate({width:"0px"},{duration:300,easing:"easeOutExpo"});
if(V.length||W.length){var b=0,c,d;if(1==a){d=V.length;for(b;b<d;b++)a=V[b],c=a.content_item,c.stop().animate({left:a.startX+"px",top:a.startY+"px",opacity:0},{duration:600,easing:"easeOutQuint"});y&&clearTimeout(y);y=setTimeout(function(){ea&&ea.css("display","none");V=[];"outside"!=k?(Y(2),ca(B,2)):xa(w,1)},600)}else{d=W.length;for(b;b<d;b++)a=W[b],c=a.content_item,c.stop().animate({left:a.startX+"px",top:a.startY+"px",opacity:0},{duration:600,easing:"easeOutQuint"});y&&clearTimeout(y);y=setTimeout(function(){fa&&
fa.css("display","none");W=[];"outside"!=k?(Y(1),ca(w,1)):xa(B,2)},600)}}else 1==a?"outside"!=k?(Y(2),ca(B,2)):xa(w,1):"outside"!=k?(Y(1),ca(w,1)):xa(B,2)}function ya(){y&&clearTimeout(y);h=!1;afterSlideContentChange(l);Ka?za&&La():La();Ma?!za&&K&&ja():K&&ja()}function ja(){r&&clearTimeout(r);m&&(m=null);var a;Xa?a=0<ka?ka:3E3:(a=d(C[l]),void 0==a.attr("data-delay")||Na(a.attr("data-width"))?(alert("You are missing 'data-delay' attribbute in slides, since you are not using global slideshow delay!"),
a=0<ka?ka:3E3):a=a.attr("data-delay"));v&&v.stop().animate({width:la+"px"},{duration:a,easing:"linear"});m=new Ya(Za,a)}function Za(){r&&clearTimeout(r);m&&(m=null);oa()}function La(){ma&&ma.css("display","block");na&&na.css("display","block")}function pa(){ma&&ma.css("display","none");na&&na.css("display","none")}function Ya(a,b){var c,d=b;this.pause=function(){r&&clearTimeout(r);d-=new Date-c;v&&v.stop()};this.resume=function(){c=new Date;r=setTimeout(a,d);v&&v.stop().animate({width:la+"px"},{duration:d,
easing:"linear"})};this.resume()}function Na(a){return 0==a.replace(/^\s+|\s+$/g,"").length}function ia(a){var b=!1;0==d(a[0]).attr("data-id")&&(b=!0);return b}function P(a,b){var c=[],d=[],e=0;for(e;e<a;e++)c[e]=e;if(b)return c;e=0;for(e;e<a;e++){var f=Math.round(Math.random()*(c.length-1));d[e]=c[f];c.splice(f,1)}return d}function $a(a,b){for(var c=a.length;c--;)if(parseInt(a[c],10)===b)return!0;return!1}var t=!1;d("body");var Oa=d(window);d(document);var Ka=isMobile?!1:e.autoHideControls,U=!1,
f=d(Sa);Aa();jQuery(window).resize(function(){Aa()});Aa();var u=f.find(".componentPlaylist"),v=f.find(".slide_preloader");v&&(v.css("opacity",.5),v.css("zIndex",12));var O=e.navigationType,ma=f.find(".slide_controls");ma.css("zIndex",10);var F=f.find(".slide_previous"),L=f.find(".slide_next");F.css("cursor","pointer");L.css("cursor","pointer");L.bind("click",function(){h||(h=!0,r&&clearTimeout(r),m&&(m=null),oa())});F.bind("click",function(){h||(h=!0,r&&clearTimeout(r),m&&(m=null),Ca())});L.bind("mouseover",
function(){d(this).find("img").attr("src","media/icons/next_on.png")});F.bind("mouseover",function(){d(this).find("img").attr("src","media/icons/previous_on.png")});L.bind("mouseout",function(){d(this).find("img").attr("src","media/icons/next.png")});F.bind("mouseout",function(){d(this).find("img").attr("src","media/icons/previous.png")});var k=e.transitionType,J=[],H=e.sliceStartOpacity;"alpha"==k&&(H=0);var ua=e.sliceOrder,ra=[],R=0,S,ta,Ea=isMobile?1:e.thumbOffOpacity,l=0,na=f.find(".nav_holder");
na.css("zIndex",11);var ga=f.find(".nav_container"),Wa=f.find(".nav_wrapper");f.find(".nav_controls");F=f.find(".nav_previous");L=f.find(".nav_next");"none"!=O&&(F.css("cursor","pointer"),L.css("cursor","pointer"),L.bind("mouseover",function(){d(this).find("img").attr("src","media/icons/next_on.png")}),F.bind("mouseover",function(){d(this).find("img").attr("src","media/icons/previous_on.png")}),L.bind("mouseout",function(){d(this).find("img").attr("src","media/icons/next.png")}),F.bind("mouseout",
function(){d(this).find("img").attr("src","media/icons/previous.png")}),F.bind("click",function(){R-=T;0>R&&(R=0);var a=R*(S+X);ga.stop().animate({left:-a+"px"},500,"easeOutQuint")}),L.bind("click",function(){R+=T;R>n-T&&(R=n-T);var a=R*(S+X);ga.stop().animate({left:-a+"px"},500,"easeOutQuint")}));f.find(".imagePreloader");var M="leftOut",h=!0,I,y,za=!1,Z=e.columns,aa=e.rows,x=Z*aa,ba=e.transitionOutOffset,Q=e.transitionTime,da=e.transitionDelay,va=e.transitionEase,ka=e.slideshowDelay,K=e.slideshowOn,
r,Xa=e.useGlobalDelay,m,T=e.visibleNavigationItems,X=isMobile?e.navigationSpacingOnMobile:e.navigationSpacing,sa=e.thumbBorderSize,Va=e.thumbBorderColor,Ma=e.pauseSlideshowOnHover,la,F=e.swipeOn.split(","),w=[],B=[],z,E,ea,fa,V=[],W=[],u=u.children("div[class=slide]"),C=[];d(u).each(function(){C.push(d(this))});var n=C.length,A=0,Ga=[],Fa=[],Pa=[],Qa=[],Ha,Ia;la=d(C[0]).width();var u=d(C[0]).height(),p=la/Z,q=u/aa,ha=u/2-q/2,Ja=la+ba;for(A;A<n;A++)u=d(C[A]),u.attr("data-id",A),u.attr("data-orig-id",
A),Ga[A]=u.attr("data-image"),Qa[A]=u.attr("data-thumb"),void 0==u.attr("data-link")||Na(u.attr("data-link"))||(u.bind("click",function(){var a=parseInt(d(this).attr("data-orig-id"),10),b=d(C[a]).attr("data-link"),a=void 0==d(C[a]).attr("data-target")||Na(d(C[a]).attr("data-target"))?"_blank":d(C[a]).attr("data-target");"_parent"==a?window.location.href=b:"_blank"==a&&window.open(b,a)}),u.css("cursor","pointer")),$a(F,A)&&u.swipe({swipe:function(a,b){h||(h=!0,r&&clearTimeout(r),m&&(m=null),"left"==
b?oa():Ca())}});J=function(a,b,c,d,e,f,h,l,m){for(var n=[],k,q,r,t=a*b,p=0;p<t;p++)k={},m?(q=p%a,r=Math.floor(p/a),k.x=q*(c+e)+h,k.y=r*(d+f)+l):(q=p%b,r=Math.floor(p/b),k.x=r*(c+e)+h,k.y=q*(d+f)+l),n.push(k);return n}(Z,aa,p,q,0,0,0,0,!1);"thumbs"==O?Ua():"bullets"==O&&Ra();(function(a){var b;b=d(new Image);Fa[a]=b;a=Ga[a];b.css({display:"block"}).on("load",function(){d(this).css({width:this.width+"px",height:this.height+"px"});Ta();qa();Y(1);ca(w,1);t||(t=!0)}).on("error",function(a){}).attr("src",
a)})(0);f.mouseenter(function(a){za=!0;Ma&&K&&t&&m&&m.pause();Ka&&!h&&La();return!1}).mouseleave(function(){za=!1;Ma&&K&&!h&&t&&(m?m.resume():ja());Ka&&pa();return!1});d.sliceGallery.toggleSlideshow=function(a){t&&(void 0==a?t&&(r&&clearTimeout(r),m&&(m=null),K?(K=!1,v&&v.stop().animate({width:"0px"},{duration:300,easing:"easeOutExpo"})):(K=!0,h||ja())):(r&&clearTimeout(r),m&&(m=null),a?(K=!0,h||ja()):(K=!1,v&&v.stop().animate({width:"0px"},{duration:300,easing:"easeOutExpo"}))))};d.sliceGallery.setSlideshowDelay=
function(a){t&&(ka=a)};d.sliceGallery.nextMedia=function(){t&&!h&&(h=!0,oa())};d.sliceGallery.previousMedia=function(){t&&!h&&(h=!0,Ca())};d.sliceGallery.openMedia=function(a){t&&!h&&(h=!0,Da(a))}}})(jQuery); 